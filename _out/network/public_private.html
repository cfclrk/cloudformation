<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Network with Public and Private Subnets </title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/main.css" />
</head>
<body>
<div id="preamble" class="status">
<nav id="navbar" class="cf">
  <ul class="cf">
    <li class="fl">
      <a href="/">cfclrk</a>
    </li>
    <li class="fr">
      <a href="/articles/home.html">Articles</a>
    </li>
    <li class="fr">
      <a href="/notes/home.html">Notes</a>
    </li>
	<li class="fr">
      <a href="/cloudformation/home.html">CloudFormation</a>
    </li>
  </ul>
</nav>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Network with Public and Private Subnets </h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org3f42b45">Overview</a></li>
<li><a href="#orgea1be90">Parameters</a>
<ul>
<li><a href="#org75c370a">DeploymentName</a></li>
</ul>
</li>
<li><a href="#org4daff8e">Resources</a>
<ul>
<li><a href="#org570364a">VPC</a></li>
<li><a href="#orgc1e0fa1">Internet Gateway</a></li>
<li><a href="#org884516a">Public Route Table</a></li>
<li><a href="#orgb47c5e7">Private Route Tables</a></li>
<li><a href="#org4854ddc">Public Subnets</a></li>
<li><a href="#org0883d6d">Private Subnets</a></li>
<li><a href="#org6c36c97">NAT Gateways</a></li>
</ul>
</li>
<li><a href="#org80f606d">Outputs</a></li>
</ul>
</div>
</nav>

<div id="outline-container-org3f42b45" class="outline-2">
<h2 id="org3f42b45"><a href="#org3f42b45">Overview</a></h2>
<div class="outline-text-2" id="text-org3f42b45">

<figure id="orgd9873d6">
<img src="../../static/img/Network-Public-Private.png" alt="Network-Public-Private.png">

</figure>

<p>
This document creates a "standard" AWS network: a VPC with two public subnets
and two private subnets. AWS documents this architecture <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Scenario2.html">here</a>, and AWS provides
a CloudFormation example <a href="https://docs.aws.amazon.com/codebuild/latest/userguide/cloudformation-vpc-template.html">here</a>.
</p>

<p>
This is the go-to VPC structure and is usually considered a starting place for
any AWS network design. For example, when using the AWS CDK, this is the
infrastrucure that is created when you use the <a href="https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-ec2.Vpc.html">VPC construct</a> with its default
options.
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">AWSTemplateFormatVersion</span>: 2010-09-09
<span style="color: #dcaeea;">Description</span>: &gt;
  <span style="color: #98be65;">VPC with two public Subnets and two private Subnets. Each public Subnet</span>
<span style="color: #98be65;">  includes a NAT Gateway, which allows outbound traffic from the private</span>
<span style="color: #98be65;">  Subnets.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea1be90" class="outline-2">
<h2 id="orgea1be90"><a href="#orgea1be90">Parameters</a></h2>
<div class="outline-text-2" id="text-orgea1be90">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Parameters</span>:
</pre>
</div>
</div>

<div id="outline-container-org75c370a" class="outline-3">
<h3 id="org75c370a"><a href="#org75c370a">DeploymentName</a></h3>
<div class="outline-text-3" id="text-org75c370a">
<p>
A <b>deployment</b> is a complete deployed application, potentially comprised of many
CloudFormation stacks. This is sometimes called an "environment", but that is an
overloaded term. Use the <code>DeploymentName</code> to indicate which deployment a Stack
is part of.
</p>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">DeploymentName</span>:
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Description</span>: A name for this deployment
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">VpcCIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for this VPC
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.0.0/16

  <span style="color: #dcaeea;">PublicSubnet1CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for public subnet in 1st AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.10.0/24

  <span style="color: #dcaeea;">PublicSubnet2CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for public subnet in 2nd AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.11.0/24

  <span style="color: #dcaeea;">PrivateSubnet1CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for private subnet in 1st AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.20.0/24

  <span style="color: #dcaeea;">PrivateSubnet2CIDR</span>:
    <span style="color: #dcaeea;">Description</span>: CIDR range for private subnet in 2nd AZ
    <span style="color: #dcaeea;">Type</span>: String
    <span style="color: #dcaeea;">Default</span>: 10.192.21.0/24
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4daff8e" class="outline-2">
<h2 id="org4daff8e"><a href="#org4daff8e">Resources</a></h2>
<div class="outline-text-2" id="text-org4daff8e">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Resources</span>:
</pre>
</div>
</div>

<div id="outline-container-org570364a" class="outline-3">
<h3 id="org570364a"><a href="#org570364a">VPC</a></h3>
<div class="outline-text-3" id="text-org570364a">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">VPC</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::VPC
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> VpcCIDR
      <span style="color: #dcaeea;">EnableDnsSupport</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">EnableDnsHostnames</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc1e0fa1" class="outline-3">
<h3 id="orgc1e0fa1"><a href="#orgc1e0fa1">Internet Gateway</a></h3>
<div class="outline-text-3" id="text-orgc1e0fa1">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">InternetGateway</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::InternetGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}"</span>

  <span style="color: #dcaeea;">InternetGatewayAttachment</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::VPCGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">InternetGatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> InternetGateway
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
</pre>
</div>
</div>
</div>

<div id="outline-container-org884516a" class="outline-3">
<h3 id="org884516a"><a href="#org884516a">Public Route Table</a></h3>
<div class="outline-text-3" id="text-org884516a">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicRouteTable</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">DefaultPublicRoute</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Route
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">DestinationCidrBlock</span>: 0.0.0.0/0
      <span style="color: #dcaeea;">GatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> InternetGateway
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb47c5e7" class="outline-3">
<h3 id="orgb47c5e7"><a href="#orgb47c5e7">Private Route Tables</a></h3>
<div class="outline-text-3" id="text-orgb47c5e7">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateRouteTable1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">DefaultPrivateRoute1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Route
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable1
      <span style="color: #dcaeea;">DestinationCidrBlock</span>: 0.0.0.0/0
      <span style="color: #dcaeea;">NatGatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> NatGateway1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateRouteTable2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::RouteTable
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">DefaultPrivateRoute2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Route
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable2
      <span style="color: #dcaeea;">DestinationCidrBlock</span>: 0.0.0.0/0
      <span style="color: #dcaeea;">NatGatewayId</span>: <span style="color: #ECBE7B;">!Ref</span> NatGateway2
</pre>
</div>
</div>
</div>

<div id="outline-container-org4854ddc" class="outline-3">
<h3 id="org4854ddc"><a href="#org4854ddc">Public Subnets</a></h3>
<div class="outline-text-3" id="text-org4854ddc">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicSubnet1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [0, <span style="color: #ECBE7B;">!GetAZs</span> <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1CIDR
      <span style="color: #dcaeea;">MapPublicIpOnLaunch</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public (AZ1)"</span>

  <span style="color: #dcaeea;">PublicSubnet1RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PublicSubnet2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [1, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2CIDR
      <span style="color: #dcaeea;">MapPublicIpOnLaunch</span>: <span style="color: #a9a1e1;">true</span>
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Public (AZ2)"</span>

  <span style="color: #dcaeea;">PublicSubnet2RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicRouteTable
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
</pre>
</div>
</div>
</div>

<div id="outline-container-org0883d6d" class="outline-3">
<h3 id="org0883d6d"><a href="#org0883d6d">Private Subnets</a></h3>
<div class="outline-text-3" id="text-org0883d6d">
<p>
There are two differences between "public" and "private" subnets:
</p>

<ol class="org-ol">
<li>Public subnets have a <b>route to an Internet Gateway</b>.</li>
<li>Public subnets usually specify <code>MapPublicIpOnLaunch: true</code>.</li>
</ol>

<p>
The first item (a <b>route to an Intenet Gateway</b>) isn't actually a quality of
the subnet itself; rather, it's a matter of what routes are in the Route
Table that the subnet is associated with.
</p>

<p>
The second item (<code>MapPublicIpOnLaunch: true</code>) tells AWS to assign public IP
addresses to EC2 instances in the subnet, which is required if you plan to
launch internet-reachable EC2 instances in the subnet. This is <i>usually</i> the
case, but one can imagine a public subnet that exists only for use with
non-EC2 services.
</p>

<p>
Private subnets <i>can</i> specify <code>MapPublicIpOnLaunch: true</code> in order to assign
internet-valid IP addresses to instances. That could be useful if, say, you
want to be able to make the subnet to temporarily public (by temporarily
adding a route to the Internet Gateway).
</p>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateSubnet1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [0, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1CIDR
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ1)"</span>

  <span style="color: #dcaeea;">PrivateSubnet1RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable1
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">PrivateSubnet2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::Subnet
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">VpcId</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
      <span style="color: #dcaeea;">AvailabilityZone</span>: <span style="color: #ECBE7B;">!Select</span> [1, <span style="color: #ECBE7B;">!GetAZs</span>  <span style="color: #98be65;">""</span>]
      <span style="color: #dcaeea;">CidrBlock</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2CIDR
      <span style="color: #dcaeea;">Tags</span>:
        - <span style="color: #dcaeea;">Key</span>: Name
          <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName} Private (AZ2)"</span>

  <span style="color: #dcaeea;">PrivateSubnet2RouteTableAssociation</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::SubnetRouteTableAssociation
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">RouteTableId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateRouteTable2
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c36c97" class="outline-3">
<h3 id="org6c36c97"><a href="#org6c36c97">NAT Gateways</a></h3>
<div class="outline-text-3" id="text-org6c36c97">
<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">NatGateway1EIP</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::EIP
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Domain</span>: vpc

  <span style="color: #dcaeea;">NatGateway1</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::NatGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">AllocationId</span>: <span style="color: #ECBE7B;">!GetAtt</span> NatGateway1EIP.AllocationId
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
</pre>
</div>

<div class="org-src-container">
<pre class="src src-yaml">  <span style="color: #dcaeea;">NatGateway2EIP</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::EIP
    <span style="color: #dcaeea;">DependsOn</span>: InternetGatewayAttachment
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">Domain</span>: vpc

  <span style="color: #dcaeea;">NatGateway2</span>:
    <span style="color: #dcaeea;">Type</span>: AWS::EC2::NatGateway
    <span style="color: #dcaeea;">Properties</span>:
      <span style="color: #dcaeea;">AllocationId</span>: <span style="color: #ECBE7B;">!GetAtt</span> NatGateway2EIP.AllocationId
      <span style="color: #dcaeea;">SubnetId</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org80f606d" class="outline-2">
<h2 id="org80f606d"><a href="#org80f606d">Outputs</a></h2>
<div class="outline-text-2" id="text-org80f606d">
<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #dcaeea;">Outputs</span>:
  <span style="color: #dcaeea;">VpcId</span>:
    <span style="color: #dcaeea;">Description</span>: A reference to the created VPC
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> VPC
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-VpcId"</span>

  <span style="color: #dcaeea;">VpcCidr</span>:
    <span style="color: #dcaeea;">Description</span>: The VPC CIDR range
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!GetAtt</span> VPC.CidrBlock
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-VpcCidr"</span>

  <span style="color: #dcaeea;">PublicSubnet1</span>:
    <span style="color: #dcaeea;">Description</span>: The public subnet in the 1st AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet1
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PublicSubnet1"</span>

  <span style="color: #dcaeea;">PublicSubnet2</span>:
    <span style="color: #dcaeea;">Description</span>: The public subnet in the 2nd AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PublicSubnet2
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PublicSubnet2"</span>

  <span style="color: #dcaeea;">PrivateSubnet1</span>:
    <span style="color: #dcaeea;">Description</span>: The private subnet in the 1st AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet1
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PrivateSubnet1"</span>

  <span style="color: #dcaeea;">PrivateSubnet2</span>:
    <span style="color: #dcaeea;">Description</span>: The private subnet in the 2nd AZ
    <span style="color: #dcaeea;">Value</span>: <span style="color: #ECBE7B;">!Ref</span> PrivateSubnet2
    <span style="color: #dcaeea;">Export</span>:
      <span style="color: #dcaeea;">Name</span>: <span style="color: #ECBE7B;">!Sub</span> <span style="color: #98be65;">"${DeploymentName}-PrivateSubnet2"</span>
</pre>
</div>
</div>
</div>
</div>
</body>
</html>
